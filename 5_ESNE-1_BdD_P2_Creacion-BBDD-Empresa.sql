#CREACION DE LA BASE DE DATOS EMPRESA
#------------------------------------

#Creamos la base de datos si o existe
CREATE DATABASE IF NOT EXISTS empresa;
USE empresa;

#Creamos Tabla Oficinas
CREATE TABLE OFICINAS
	( NUMOFIC INTEGER(2)  PRIMARY KEY
	, NOMCEN VARCHAR(30)
	, DIRECEN  VARCHAR(30));

#Creamos Tabla Departamentos
CREATE TABLE departamentos
	( NUMDEP INTEGER(3)  PRIMARY KEY
	, NUMOFIC INTEGER(2)  NOT NULL REFERENCES OFICINAS(NUMOFIC)
	, DIRECTOR INTEGER(3)
	, TIPODIR	char(1) CHECK (UPPER(TIPODIR) IN ('F','T'))
	, PRESUP INTEGER(3)
	, DEPDEP INTEGER(3) REFERENCES DEPARTAMENTOS(NUMDEP)
	, NOMDEP VARCHAR(20));

#Creamos Tabla Empleados
CREATE TABLE EMPLEADOS
	( NUMEMP INTEGER(3) PRIMARY KEY
	, NUMDEP INTEGER(3) NOT NULL REFERENCES DEPARTAMENTOS(NUMDEP)
	, EXTENSION VARCHAR(3)
	, FECHANAC DATE
	, FECHAING DATE
	, SALARIO FLOAT(6,2)
	, COMISION FLOAT(5,2)
	, NUMHIJOS INTEGER(2)
	, NOMEMP VARCHAR(30));

#Insertamos datos en Tabla Oficinas
INSERT INTO OFICINAS VALUES(10,'SEDE CENTRAL','C/URIA, 20, OVIEDO');
INSERT INTO OFICINAS VALUES (20,'REL. CLIENTES','C/MOROS, 5, GIJÓN');
	
#Insertamos datos en Tabla Departamentos
INSERT INTO DEPARTAMENTOS VALUES(100,10,260,'F',12.00,NULL,'DIRECCION GENERAL');
INSERT INTO DEPARTAMENTOS VALUES(110,20,180,'F',15.00,100,'DIRECCION COMERCIAL');
INSERT INTO DEPARTAMENTOS VALUES(111,20,180,'T',11.00,110,'SECTOR INDUSTRIAL');
INSERT INTO DEPARTAMENTOS VALUES(112,20,270,'F',9.00,110,'SECTOR SERVICIOS');
INSERT INTO DEPARTAMENTOS VALUES(120,10,150,'T',3.00,100,'ORGANIZACION');
INSERT INTO DEPARTAMENTOS VALUES(121,10,150,'F',2.00,120,'PERSONAL');
INSERT INTO DEPARTAMENTOS VALUES(122,10,350,'F',6.00,120,'PROCESO DE DATOS');
INSERT INTO DEPARTAMENTOS VALUES(130,10,310,'F',2.00,100,'FINANZAS');

#Insertamos datos en Tabla Empleados	
INSERT INTO EMPLEADOS VALUES(110,121,350, STR_TO_DATE('10-11-1959', '%d-%m-%Y'), STR_TO_DATE('15-2-1980', '%d-%m-%Y'),1310,NULL,3,'Alvarez Díaz, César');
INSERT INTO EMPLEADOS VALUES(120,112,840, STR_TO_DATE('9-6-1960', '%d-%m-%Y'), STR_TO_DATE('1-10-1988', '%d-%m-%Y'),1350,110,1,'García Hurtado, Mario');
INSERT INTO EMPLEADOS VALUES(130,112,810, STR_TO_DATE('9-9-1965', '%d-%m-%Y'), STR_TO_DATE('1-2-1989', '%d-%m-%Y'),1290,110,2,'Pérez Terol, Lucia');
INSERT INTO EMPLEADOS VALUES(150,121,340, STR_TO_DATE('10-8-1960', '%d-%m-%Y'), STR_TO_DATE('15-1-1978', '%d-%m-%Y'),2440,NULL,0,'Fernández Inguanzo, Julio');
INSERT INTO EMPLEADOS VALUES(160,111,740, STR_TO_DATE('9-7-1965', '%d-%m-%Y'), STR_TO_DATE('11-11-1988', '%d-%m-%Y'),1310,110,2,'Ramos Aguirre, Esperanza');
INSERT INTO EMPLEADOS VALUES(180,110,508, STR_TO_DATE('18-10-1964', '%d-%m-%Y'), STR_TO_DATE('18-3-1986', '%d-%m-%Y'),2480,150,2,'Alonso Pérez, Marcos');
INSERT INTO EMPLEADOS VALUES(190,121,350, STR_TO_DATE('12-5-1962', '%d-%m-%Y'), STR_TO_DATE('11-2-1982', '%d-%m-%Y'),1300,NULL,4,'Villa Vega, Julia');
INSERT INTO EMPLEADOS VALUES(210,100,200, STR_TO_DATE('28-9-1970', '%d-%m-%Y'), STR_TO_DATE('22-1-2000', '%d-%m-%Y'),1380,NULL,2,'Gómez Fonseca, Pilar');
INSERT INTO EMPLEADOS VALUES(240,111,760, STR_TO_DATE('26-2-1962', '%d-%m-%Y'), STR_TO_DATE('24-2-1996', '%d-%m-%Y'),2280,100,3,'López Sanz, Laura');
INSERT INTO EMPLEADOS VALUES(250,100,250, STR_TO_DATE('27-10-1966', '%d-%m-%Y'), STR_TO_DATE('01-3-1987', '%d-%m-%Y'),1450,NULL,0,'González Alvarez, Adriana');
INSERT INTO EMPLEADOS VALUES(260,100,220, STR_TO_DATE('03-12-1963', '%d-%m-%Y'), STR_TO_DATE('12-7-1998', '%d-%m-%Y'),2720,NULL,6,'López Zarabojo, Antonio');
INSERT INTO EMPLEADOS VALUES(270,112,800, STR_TO_DATE('21-5-1965', '%d-%m-%Y'), STR_TO_DATE('10-9-1986', '%d-%m-%Y'),2380,180,3,'García Abril, Laura');
INSERT INTO EMPLEADOS VALUES(280,130,410, STR_TO_DATE('11-1-1968', '%d-%m-%Y'), STR_TO_DATE('8-10-1991', '%d-%m-%Y'),1290,NULL,5,'Fermín Canalejas, Flor');
INSERT INTO EMPLEADOS VALUES(285,122,620, STR_TO_DATE('25-10-1969', '%d-%m-%Y'), STR_TO_DATE('15-2-2002', '%d-%m-%Y'),1380,NULL,0,'Ramos Polo, Carmen');
INSERT INTO EMPLEADOS VALUES(290,120,910, STR_TO_DATE('30-11-1967', '%d-%m-%Y'), STR_TO_DATE('14-2-1988', '%d-%m-%Y'),1270,NULL,3,'Gil Robles, Gloria');
INSERT INTO EMPLEADOS VALUES(310,130,480, STR_TO_DATE('21-11-1976', '%d-%m-%Y'), STR_TO_DATE('15-1-2000', '%d-%m-%Y'),2420,NULL,0,'Algueró García, Augusto');
INSERT INTO EMPLEADOS VALUES(320,122,620, STR_TO_DATE('25-12-1977', '%d-%m-%Y'), STR_TO_DATE('5-2-2005', '%d-%m-%Y'),2405,NULL,2,'Intrialgo Pérez, Estela');
INSERT INTO EMPLEADOS VALUES(330,112,850, STR_TO_DATE('19-8-1978', '%d-%m-%Y'), STR_TO_DATE('1-3-2002', '%d-%m-%Y'),1280,190,0,'Alonso Ruiz, Amelia');
INSERT INTO EMPLEADOS VALUES(350,122,610, STR_TO_DATE('13-4-1979', '%d-%m-%Y'), STR_TO_DATE('10-9-2010', '%d-%m-%Y'),2450,NULL,1,'Campos Fernández, Arturo');
INSERT INTO EMPLEADOS VALUES(360,111,750, STR_TO_DATE('29-10-1978', '%d-%m-%Y'), STR_TO_DATE('10-10-2004', '%d-%m-%Y'),1250,100,2,'Vaamonde Vilavedra, Lara');
INSERT INTO EMPLEADOS VALUES(370,121,360, STR_TO_DATE('22-6-1967', '%d-%m-%Y'), STR_TO_DATE('20-1-2000', '%d-%m-%Y'),2190,NULL,1,'Meana Ruiz, Vanesa');
INSERT INTO EMPLEADOS VALUES(380,112,880, STR_TO_DATE('30-3-1968', '%d-%m-%Y'), STR_TO_DATE('1-1-1988', '%d-%m-%Y'),1180,NULL,0,'Martínez Oriol, Víctor');
INSERT INTO EMPLEADOS VALUES(390,110,500, STR_TO_DATE('19-2-1976', '%d-%m-%Y'), STR_TO_DATE('8-10-2006', '%d-%m-%Y'),2215,NULL,1,'Morán Muñiz, Carmen');
INSERT INTO EMPLEADOS VALUES(400,111,780, STR_TO_DATE('18-8-1979', '%d-%m-%Y'), STR_TO_DATE('1-11-1999', '%d-%m-%Y'),1185,NULL,0,'Campos Fernández, Javier');
INSERT INTO EMPLEADOS VALUES(410,122,660, STR_TO_DATE('14-7-1988', '%d-%m-%Y'), STR_TO_DATE('13-10-2010', '%d-%m-%Y'),1175,NULL,0,'Molina Muñoz, Angela');
INSERT INTO EMPLEADOS VALUES(420,130,450, STR_TO_DATE('22-10-1976', '%d-%m-%Y'), STR_TO_DATE('19-11-1998', '%d-%m-%Y'),2400,NULL,0,'Suárez Fierro, Claudia');
INSERT INTO EMPLEADOS VALUES(430,122,650, STR_TO_DATE('26-2-1967', '%d-%m-%Y'), STR_TO_DATE('19-11-2000', '%d-%m-%Y'),1210,NULL,1,'Mora Beltrán, Noa');
INSERT INTO EMPLEADOS VALUES(440,111,760, STR_TO_DATE('26-9-1966', '%d-%m-%Y'), STR_TO_DATE('28-2-1988', '%d-%m-%Y'),2210,100,0,'Estefan Durán, Rubén');
INSERT INTO EMPLEADOS VALUES(450,112,880, STR_TO_DATE('21-10-1966', '%d-%m-%Y'), STR_TO_DATE('28-2-1986', '%d-%m-%Y'),1200,100,0,'Pérez Ríos, Alejandra');
INSERT INTO EMPLEADOS VALUES(480,111,760, STR_TO_DATE('4-4-1965', '%d-%m-%Y'), STR_TO_DATE('28-2-1986', '%d-%m-%Y'),1210,100,1,'Pino Barroso, Luis');
INSERT INTO EMPLEADOS VALUES(490,112,880, STR_TO_DATE('6-6-1964', '%d-%m-%Y'), STR_TO_DATE('1-1-1988', '%d-%m-%Y'),2180,100,0,'Torres Barcia, Rodrigo');
INSERT INTO EMPLEADOS VALUES(500,112,750, STR_TO_DATE('8-10-1965', '%d-%m-%Y'), STR_TO_DATE('1-1-1987', '%d-%m-%Y'),1200,100,0,'Vázquez Wert, Abril');
INSERT INTO EMPLEADOS VALUES(510,110,550, STR_TO_DATE('4-5-1966', '%d-%m-%Y'), STR_TO_DATE('1-11-1986', '%d-%m-%Y'),2200,NULL,1,'Zabala Campos , Ricardo');

#Añadimos Clave Foranea
ALTER TABLE `departamentos`
	ADD CONSTRAINT `FK_DEP` FOREIGN KEY (`DIRECTOR`) REFERENCES `empleados` (`NUMEMP`);
INSERT INTO EMPLEADOS VALUES(550,111,780, STR_TO_DATE('10-1-1970', '%d-%m-%Y'), STR_TO_DATE('21-1-1988', '%d-%m-%Y'),1100,120,0,'Riestra Carbajal, Santiago');empleadosempleados